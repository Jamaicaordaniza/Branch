var $window=$(window);$(function(){const shopBySpacesHeroSettings={classes:{clickableLinkDotClass:"shop-by-spaces-hero__clickable-link-dot"},selectors:{clickableLinkDotSelector:".shop-by-spaces-hero__clickable-link-dot",clickableLinksContainerSelector:".shop-by-spaces-hero__clickable-links-container",shopBySpacesHeroSelector:".shop-by-spaces-hero"},specs:{dotTextDescription:"bold 10px Quicksand, sans-serif"}},calcTextWidth=function(text,font){const context=(calcTextWidth.canvas||(calcTextWidth.canvas=document.createElement("canvas"))).getContext("2d");return context.font=font,context.measureText(text).width},shopBySpacesIsTouchDevice=function(){return"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0},insertText=function(dot){let text=`Featured: <a href="${dot.getAttribute("data-product-url")}" target="_blank">${dot.getAttribute("data-product-title")}</a>`;dot.innerHTML=text},modifyDotDimensions=function(dot,dots,status){if(dots.forEach(singleDot=>{singleDot.setAttribute("style",""),singleDot.innerHTML=""}),dot){let textWidth=1.13*calcTextWidth(`Featured: ${dot.getAttribute("data-product-title")}`,shopBySpacesHeroSettings.specs.dotTextDescription),percentageAcross=parseInt(dot.getAttribute("data-position-percentage-across"));if(status){let newStyling=percentageAcross>50?`right: calc(${100-percentageAcross}% - 24px); left: calc(${percentageAcross}% - ${textWidth+16}px + 24px); width: ${textWidth+16}px`:`width: ${textWidth+16}px`;dot.setAttribute("style",newStyling),insertText(dot)}else dot.style.width="24px"}},modifyProductCard=function(dot,dots,status){let allProductCards=dots[0].closest(".shop-by-spaces-hero").querySelectorAll(".shop-by-spaces-hero__clickable-link-product"),allProductTriangles=dots[0].closest(".shop-by-spaces-hero").querySelectorAll(".shop-by-spaces-hero__clickable-link-product-triangle"),allDots=dots[0].closest(".shop-by-spaces-hero").querySelectorAll(".shop-by-spaces-hero__clickable-link-dot");if(dot){let dotIndex=dot.getAttribute("data-index");allProductCards=dots[0].closest(".shop-by-spaces-hero").querySelectorAll(`.shop-by-spaces-hero__clickable-link-product:not([data-index="${dotIndex}"])`),allProductTriangles=dots[0].closest(".shop-by-spaces-hero").querySelectorAll(`.shop-by-spaces-hero__clickable-link-product-triangle:not([data-index="${dotIndex}"])`),allDots=dots[0].closest(".shop-by-spaces-hero").querySelectorAll(`.shop-by-spaces-hero__clickable-link-dot:not([data-index="${dotIndex}"])`)}allProductCards.forEach(productCard=>{productCard.setAttribute("style","opacity: 0; pointer-events: none; visibility: visible;")}),allProductTriangles.forEach(productTriangle=>{productTriangle.setAttribute("style","opacity: 0; pointer-events: none; visibility: visible;")}),allDots.forEach(singleDot=>{singleDot.setAttribute("style","background-color: var(--primary-green); border-color: var(--primary-green); pointer-events: none;"),setTimeout(()=>{singleDot.setAttribute("style","background-color: var(--primary-green); border-color: var(--primary-green);")},100)}),dot&&(status?(dot.closest(".shop-by-spaces-hero__clickable-link").querySelector(".shop-by-spaces-hero__clickable-link-product-triangle").setAttribute("style","visibility: visible; opacity: 1;"),dot.closest(".shop-by-spaces-hero__clickable-link").querySelector(".shop-by-spaces-hero__clickable-link-product").setAttribute("style","visibility: visible; opacity: 1; pointer-events: all;"),dot.setAttribute("style","background-color: var(--primary-blue); border-color: var(--primary-blue);")):(dot.closest(".shop-by-spaces-hero__clickable-link").querySelector(".shop-by-spaces-hero__clickable-link-product-triangle").setAttribute("style","opacity: 0; pointer-events: none; visibility: visible;"),dot.closest(".shop-by-spaces-hero__clickable-link").querySelector(".shop-by-spaces-hero__clickable-link-product").setAttribute("style","opacity: 0; pointer-events: none; visibility: visible;"),dot.setAttribute("style","background-color: var(--primary-green); border-color: var(--primary-green); pointer-events: none;"),setTimeout(()=>{dot.setAttribute("style","background-color: var(--primary-green); border-color: var(--primary-green);")},100)))},handleDotEvent=function(event,dot,dots){let status;event!=="click outside"&&(status=dot.getAttribute("data-showing")!=="true"),dots.forEach(singleDot=>{singleDot.setAttribute("data-showing",!1),singleDot.setAttribute("data-transitioning",!0),setTimeout(()=>{singleDot.setAttribute("data-transitioning",!1)},40)}),event!=="click outside"?(dot.setAttribute("data-showing",status),modifyProductCard(dot,dots,status)):modifyProductCard(null,dots,null)},handleProductCardHover=function(event,productCard){let hover=event=="mouseenter";productCard.closest(".shop-by-spaces-hero__clickable-link").setAttribute("data-product-card-hover",hover)},onClickOutside=function(e,dots){let isClickedOutside=!0;if((e.target.className.includes(shopBySpacesHeroSettings.classes.clickableLinkDotClass)||e.target.className.includes(".shop-by-spaces-hero__clickable-link-product")||e.target.closest(".shop-by-spaces-hero__clickable-link-product"))&&(isClickedOutside=!1),isClickedOutside){handleDotEvent("click outside",null,dots);let linkUrl=dots[0].closest(".shop-by-spaces-hero__clickable-links-container").getAttribute("data-link-url");linkUrl&&window.open(`/pages/${linkUrl}`,"_blank")}},initDotHoverFocusEvent=function(shopBySpacesHeroSection){let dots=shopBySpacesHeroSection.querySelectorAll(`${shopBySpacesHeroSettings.selectors.clickableLinkDotSelector}`),imageInnerContainer=shopBySpacesHeroSection.querySelector(`${shopBySpacesHeroSettings.selectors.clickableLinksContainerSelector}`),linkUrl=`/pages/${imageInnerContainer.getAttribute("data-link-url")}`;dots.length>0&&dots.forEach(dot=>{dot.addEventListener("click",e=>{handleDotEvent("click",dot,dots)}),imageInnerContainer.addEventListener("click",function(e){onClickOutside(e,dots)})})},initShopBySpacesSlider=function(event,shopBySpacesHeroSection){let params={};var menu=[];let autoplay=!1,slideAmount=parseInt(shopBySpacesHeroSection.querySelector(".shop-by-spaces-hero__slider").getAttribute("data-slides"));if(shopBySpacesHeroSection.querySelector(".shop-by-spaces-hero__slider").getAttribute("data-autoplay")=="true"&&(autoplay={delay:shopBySpacesHeroSection.querySelector(".shop-by-spaces-hero__slider").getAttribute("data-autoplay-delay")*1e3,disableOnInteraction:!1}),shopBySpacesHeroSection.querySelectorAll(".swiper-slide").forEach(slide=>{menu.push(slide.getAttribute("data-text"))}),event=="load"&&(params={slidesPerView:1,spaceBetween:0,freeMode:!1,autoplay,scrollbar:{el:".shop-by-spaces-hero__container .swiper-scrollbar",hide:!0},pagination:{el:".shop-by-spaces-hero__swiper-scrollbar-inner-container .swiper-pagination",clickable:!0,renderBullet:function(index,className){return'<span class="'+className+'">'+menu[index]+"</span>"}}}),slideAmount>1){var spaceBySpacesSwiper=new Swiper(".shop-by-spaces-hero__slider",params);$(window).resize($.debounce(500,function(){spaceBySpacesSwiper.update(),spaceBySpacesSwiper.slideTo(0)}))}else shopBySpacesHeroSection.querySelector(".swiper-pagination").innerHTML=`<span class="swiper-pagination-bullet">${menu[0]}</span>`},calcHeroTextWidth=function(text,font){const context=(calcHeroTextWidth.canvas||(calcHeroTextWidth.canvas=document.createElement("canvas"))).getContext("2d");return context.font=font,context.measureText(text).width},initHoverStyling=function(){let shopBySpacesStyling=document.querySelectorAll('style[shop-by-spaces-placement="true"]');shopBySpacesStyling.length>0&&shopBySpacesStyling.forEach(shopBySpacesStyle=>{shopBySpacesStyle.remove()}),document.querySelectorAll(".shop-by-spaces-hero__clickable-link-product").forEach(clickableLinkProduct=>{let currentProductWidth=window.screen.width>480?300:250;window.screen.width>840&&(currentProductWidth=350);let currentFontSize=16,currentTextWidth=window.screen.width>480?160:110;window.screen.width>600&&window.screen.width<841?currentFontSize=18:window.screen.width>840&&(currentFontSize=20);let textWidth=parseInt(1+calcHeroTextWidth(`${clickableLinkProduct.getAttribute("data-product-title")}`,`bold ${currentFontSize}px Quicksand, sans-serif`))})},initshopBySpacesHero=function(){let shopBySpacesHeroSections=document.querySelectorAll(".shopify-section.shop-by-spaces-hero");shopBySpacesHeroSections.length>0&&shopBySpacesHeroSections.forEach(shopBySpacesHeroSection=>{let fromMetafieldSection=shopBySpacesHeroSection.querySelector('.shop-by-spaces-hero[data-from-metafield="true"]');shopBySpacesHeroSection.querySelectorAll(".shop-by-spaces-hero__clickable-links-container").length>0&&(initDotHoverFocusEvent(shopBySpacesHeroSection),initHoverStyling(),$(window).resize($.throttle(50,function(){initHoverStyling()}))),fromMetafieldSection&&initShopBySpacesSlider("load",fromMetafieldSection)})};window.onload=initshopBySpacesHero()}),$(function(){const initCustomImageSliderSwiper=function(event,customFeatureImageSection){if(console.log("init"),customFeatureImageSection.querySelector(".custom-feature-image__image-swiper")){let autoplay={delay:customFeatureImageSection.querySelector(".custom-feature-image__image-swiper").getAttribute("data-autoplay-delay"),disableOnInteraction:!1},params={};event=="load"&&(params={slidesPerView:1,spaceBetween:0,freeMode:!1,autoplay,effect:"fade",crossFade:!0,speed:600,loop:!0});var swiper=new Swiper(".custom-feature-image__image-swiper",params)}},initCustomImageSlider=function(){let customFeatureImageSections=document.querySelectorAll(".shopify-section.custom-feature-image-section");customFeatureImageSections.length>0&&customFeatureImageSections.forEach(customFeatureImageSection=>{initCustomImageSliderSwiper("load",customFeatureImageSection)})},initCollectionCarouselRowSlider=function(selector){let params={slidesPerView:1.25,spaceBetween:20,freeMode:!1,breakpoints:{600:{slidesPerView:2.25,spaceBetween:20},1200:{slidesPerView:4,spaceBetween:20}}};var swiper=new Swiper(`#${selector} .collection-carousel-row.page-container .collection-carousel-row__product-carousel-container`,params)},initCollectionCarouselRow=function(){let collectionCarouselRows=document.querySelectorAll(".collection-carousel-row.page-container .collection-carousel-row__product-carousel-container");collectionCarouselRows.length>0&&collectionCarouselRows.forEach(collectionCarouselRow=>{let selector=collectionCarouselRow.closest(".shopify-section").id;initCollectionCarouselRowSlider(selector)})},addAnimationClass=function(){let sections=document.querySelectorAll(".template-collection-2023_bfcm_sale .shopify-section"),sectionsToSlider=[];sections.length>0&&sections.forEach(section=>{!section.id.includes("shogun")&&section.id.includes("template")&&sectionsToSlider.push(section)}),sectionsToSlider.length>0&&sectionsToSlider.forEach(sectionToSlide=>{if(sectionToSlide.classList.contains("custom-feature-image-section")&&sectionToSlide.nextSibling.classList.contains("collection-carousel-row-section")){let container=document.createElement("div"),nextElement=sectionToSlide.nextSibling;container.classList.add("animation-element"),sectionToSlide.parentNode.insertBefore(container,sectionToSlide),container.appendChild(sectionToSlide),container.appendChild(nextElement)}else if(sectionToSlide.classList.contains("custom-feature-image-section"))sectionToSlide.querySelector(".custom-feature-image").classList.add("animation-element");else if(sectionToSlide.classList.contains("collection-carousel-row-section")&&!sectionToSlide.parentElement.classList.contains("animation-element"))console.log("sectionToSlide.parentElement.classList",sectionToSlide.parentElement.classList),sectionToSlide.querySelector(".collection-carousel-row__product-carousel-container").classList.add("animation-element");else if(sectionToSlide.classList.contains("feature-box-new"))sectionToSlide.querySelector(".c-iwt-flex-container ").classList.add("animation-element");else if(sectionToSlide.classList.contains("shop-by-spaces-hero")){let container=document.createElement("div"),thisElement=sectionToSlide.querySelector(".shop-by-spaces-hero__container "),nextElement=sectionToSlide.querySelector(".shop-by-spaces-hero__pdp-cta-container ");container.classList.add("animation-element"),thisElement.parentNode.insertBefore(container,thisElement),container.appendChild(thisElement),container.appendChild(nextElement)}else sectionToSlide.classList.contains("progress-bar-and-text")?sectionToSlide.querySelector(".progress-bar-and-text__container").classList.add("animation-element"):sectionToSlide.parentElement.classList.contains("animation-element")||sectionToSlide.classList.add("animation-element")})},checkIfInView=function(){var $animation_elements=$(".animation-element"),window_height=$window.height(),window_top_position=$window.scrollTop(),window_bottom_position=window_top_position+window_height;$.each($animation_elements,function(){var $element=$(this),element_height=$element.outerHeight(),element_top_position=$element.offset().top,element_bottom_position=element_top_position+element_height;(element_bottom_position>=window_top_position&&element_top_position<=window_bottom_position||element_bottom_position<window_top_position)&&$element.addClass("in-view")})},initCollectionPageAnimation=function(){addAnimationClass(),$(window).scroll($.throttle(50,function(){checkIfInView()})),$(window).resize($.throttle(50,function(){checkIfInView()})),$window.trigger("scroll")},initAllElements=function(){initCustomImageSlider(),initCollectionCarouselRow(),initCollectionPageAnimation()};window.onload=initAllElements()}),$(function(){const initMSBDElements=function(allPDPMSBDMessages,allSideCartMSBDMessages,allCartPageMSBDMessages){console.log("init msbd")},initMSBD=function(){let msbdMessagePresent=!1,allPDPMSBDMessages=document.querySelectorAll('.msbd-message[data-type="pdp"]'),allSideCartMSBDMessages=document.querySelectorAll('.msbd-message[data-type="side-cart"]'),allCartPageMSBDMessages=document.querySelectorAll('.msbd-message[data-type="cart-page"]');(allPDPMSBDMessages.length>0||allSideCartMSBDMessages.length>0||allCartPageMSBDMessages.length>0)&&(msbdMessagePresent=!0),msbdMessagePresent&&initMSBDElements(allPDPMSBDMessages,allSideCartMSBDMessages,allCartPageMSBDMessages)};window.onload=initMSBD()});
//# sourceMappingURL=/cdn/shop/t/29/assets/scripts_sections.js.map?v=29909752966623252811706195240
