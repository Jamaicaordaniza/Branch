!function(){"use strict";(()=>{let e;var t,n,o,i,r,a;let s,c,l;function d(e,t){document.getElementById(t).onclick=function(){g("Initiate button Clicked",{"Embed Option":"redirect"}),window.open(e,"_blank")}}function p(e,t){const n=`\n    <iframe id="sendhark.com-partner-widget"\n        style="\n        border: 0px solid silver;"\n        allow="camera;microphone;display-capture;"\n        src="${e}"\n        width="100%"\n        height="100%">\n    </iframe>\n`;document.getElementById(t).innerHTML=n}function u(e,t,n){function o(){const t=document.getElementById("sendhark.com-partner-widget"),n=t.querySelector("iframe"),o="none"!=t.style.display;o||(n.src||(n.src=e),g("Initiate button Clicked",{"Embed Option":"popup"})),t.style.display=o?"none":"flex"}window.addEventListener("message",(function(e){const t=e.data;"hark sent"===t?o():"open-zd-chat"===t?.action&&h(t.customerEmail??"",t.harkId)})),window.toggleHarkWidget=o;const i=document.getElementById(t);if(i&&(i.onclick=window.toggleHarkWidget),l?.show_floating_icon){const e=l.floating_icon_image_url,t=e?function(e){const t=document.createElement("button");t.style.background="none",t.style.border="none",t.style.cursor="pointer",t.style.padding="0",t.style.filter="drop-shadow(1px 1px 3px #565656)";const n=document.createElement("img");return n.src=e,n.style.display="block",n.style.maxHeight="50px",t.appendChild(n),t.addEventListener("mouseover",(()=>{t.style.dropShadow="0 0 20px rgba(0, 0, 0, 0.7)"})),t.addEventListener("mouseout",(()=>{t.style.dropShadow="0 0 10px rgba(0, 0, 0, 0.5)"})),t}(e):function(){const e=s?.brand_colors||{},t=document.createElement("button");return t.textContent="Get Help",t.style.backgroundColor=e[500]||"#02438F",t.style.color=e.buttonText||"#ffff",t.style.border="none",t.style.padding="8px 16px",t.style.textAlign="center",t.style.textDecoration="none",t.style.display="inline-block",t.style.fontSize="16px",t.style.margin="4px 2px",t.style.cursor="pointer",t.style.borderRadius="4px",t.style.boxShadow="0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19)",t.addEventListener("mouseover",(function(){this.style.backgroundColor=e[600]||"#2E69DA"})),t.addEventListener("mouseout",(function(){this.style.backgroundColor=e[500]||"#02438F"})),t}();if(t.setAttribute("id","hark-floating-icon-button-hark"),n){const e=document.getElementById(n);e&&e.appendChild(t)}else t.style.position="fixed",t.style.bottom="20px",t.style.right="25px",t.style.zIndex=2147483646,document.body.appendChild(t);t.onclick=window.toggleHarkWidget}document.body.insertAdjacentHTML("beforeend",' <div\n      id="sendhark.com-partner-widget"\n      style="\n        position: fixed;\n        display:none;\n        z-index: 2147483647;\n        left: 0;\n        top: 0;\n        width: 100%;\n        height: 100%;\n        overflow: auto;\n        background-color: rgb(0, 0, 0);\n        background-color: rgba(0, 0, 0, 0.4);\n      "\n    >\n      <div style="margin: 10% auto; position: relative; width: 400px; max-width:85% ">\n    \n        <iframe\n          style="border: 0.5px solid silver; width:100%;  min-height: 620px; border-radius: 10px;"\n          allow="camera;microphone;display-capture"\n        >\n        </iframe>\n        <button\n          href="#"\n          onclick="toggleHarkWidget(); return false;"\n          onMouseOver="this.style.backgroundColor=\'#d1d1d1\'"\n          onMouseOut="this.style.backgroundColor=\'#eaeded\'"\n          style="\n            position: absolute;\n            top: -15px;\n            right: -15px;\n            max-width: 30px;\n            max-height: 30px;\n            height:30px;\n            width:30px;\n            border-radius: 5px;\n            background-color: rgb(234, 237, 237);\n            border: none;\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            color:white;\n            padding: 4px 6px;\n            margin:0;\n            box-sizing: border-box; \n            box-shadow: rgba(0, 0, 0, 0.2) 0px 8px 16px 0px, rgba(0, 0, 0, 0.19) 0px 6px 20px 0px;"\n        >\n          <?xml version="1.0"?><svg\n            fill="#36454F"\n            xmlns="http://www.w3.org/2000/svg"\n            viewBox="0 0 30 30"\n            width="10px"\n            height="10px"\n          >\n            <path\n              d="M 7 4 C 6.744125 4 6.4879687 4.0974687 6.2929688 4.2929688 L 4.2929688 6.2929688 C 3.9019687 6.6839688 3.9019687 7.3170313 4.2929688 7.7070312 L 11.585938 15 L 4.2929688 22.292969 C 3.9019687 22.683969 3.9019687 23.317031 4.2929688 23.707031 L 6.2929688 25.707031 C 6.6839688 26.098031 7.3170313 26.098031 7.7070312 25.707031 L 15 18.414062 L 22.292969 25.707031 C 22.682969 26.098031 23.317031 26.098031 23.707031 25.707031 L 25.707031 23.707031 C 26.098031 23.316031 26.098031 22.682969 25.707031 22.292969 L 18.414062 15 L 25.707031 7.7070312 C 26.098031 7.3170312 26.098031 6.6829688 25.707031 6.2929688 L 23.707031 4.2929688 C 23.316031 3.9019687 22.682969 3.9019687 22.292969 4.2929688 L 15 11.585938 L 7.7070312 4.2929688 C 7.5115312 4.0974687 7.255875 4 7 4 z"\n            />\n          </svg>\n        </button>\n      </div>\n    </div>')}function g(e,t){return mixpanel.hark_project.track(e,t)}async function m(e){try{const t=await fetch(`https://py-server.sendhark.com/companies/embed-settings/?company_id=${e}`);return await t.json()}catch(e){console.log(error)}}async function h(e,t){toggleHarkWidget(),await zE("messenger:set","conversationFields",[{id:c.zendesk_chat_custom_field_id,value:e}]),await zE("messenger:set",{conversationTags:["hark_chathandoff","harkid_"+t]}),zE("messenger","show"),zE("messenger","open")}window.harkEmbedJs={init:async function(t,n="inline",o,i={}){const{workflowSlug:r,parentID:a}=i,h={inline:p,popup:u,redirect:d};let y=String(n).trim().toLocaleLowerCase();["inline","popup","redirect"].includes(y)||(y="inline");o||(o="inline"===y?"sendhark.com-partner-embed":"sendhark.com-action-button");const f=String(t).trim();let x=`https://app.sendhark.com/new/${f}?is_embed=true&sendharkjsmxpnlid=${e}`;const _=document.getElementById(o);if(_){const e=function(e){const t=Object.keys(e).reduce(((t,n)=>(e[n]&&t.push(`${n}=${e[n]}`),t)),[]);return t.join("&")}(function(e){const t=["data-first_name","data-last_name","data-email","data-phone","data-address","data-ticket_id"].reduce(((t,n)=>(t[n.split("-")[1]]=e.getAttribute(n),t)),{});return t}(_));e&&(x=`${x}&${e}`)}const b=await async function(e){const t="https://py-server.sendhark.com";try{const n=await fetch(`${t}/companies/${e}/`),o=await n.json();return o?.data?.company}catch(e){console.log(error)}}(f),k=b?.workflows;c=b,l=await m(f),r&&(s=selectedWorkflow=k.find((e=>e.slug===slug)));Boolean(s)||(s=k.find((e=>!0===e.default)));h[y](x,o,a),g("Script Loaded",{"Embed Option":y,floating_icon:"popup"===n,company:c?.name}),async function(){try{const e=document.createElement("script");e.setAttribute("async","true"),e.onload=function(){"undefined"!=typeof zE&&zE("messenger","hide")},e.src=c.zendesk_chat_widget_script_url,e.id="ze-snippet",document.head.appendChild(e)}catch(e){console.log(e)}}()}},t=document,(n=window.mixpanel||[]).__SV||(window.mixpanel=n,n._i=[],n.init=function(e,t,o){function i(e,t){var n=t.split(".");2==n.length&&(e=e[n[0]],t=n[1]),e[t]=function(){e.push([t].concat(Array.prototype.slice.call(arguments,0)))}}var s=n;for(void 0!==o?s=n[o]=[]:o="mixpanel",s.people=s.people||[],s.toString=function(e){var t="mixpanel";return"mixpanel"!==o&&(t+="."+o),e||(t+=" (stub)"),t},s.people.toString=function(){return s.toString(1)+".people (stub)"},r="disable time_event track track_pageview track_links track_forms track_with_groups add_group set_group remove_group register register_once alias unregister identify name_tag set_config reset opt_in_tracking opt_out_tracking has_opted_in_tracking has_opted_out_tracking clear_opt_in_out_tracking start_batch_senders people.set people.set_once people.unset people.increment people.append people.union people.track_charge people.clear_charges people.delete_user people.remove".split(" "),a=0;a<r.length;a++)i(s,r[a]);var c="set set_once union unset remove delete".split(" ");s.get_group=function(){function e(e){t[e]=function(){call2_args=arguments,call2=[e].concat(Array.prototype.slice.call(call2_args,0)),s.push([n,call2])}}for(var t={},n=["get_group"].concat(Array.prototype.slice.call(arguments,0)),o=0;o<c.length;o++)e(c[o]);return t},n._i.push([e,t,o])},n.__SV=1.2,(o=t.createElement("script")).type="text/javascript",o.async=!0,o.src="undefined"!=typeof MIXPANEL_CUSTOM_LIB_URL?MIXPANEL_CUSTOM_LIB_URL:"file:"===t.location.protocol&&"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js".match(/^\/\//)?"https://cdn.mxpnl.com/libs/mixpanel-2-latest.min.js":"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js",(i=t.getElementsByTagName("script")[0]).parentNode.insertBefore(o,i)),mixpanel.init("ba7072da7c16aa18d6726bda9bc3a7ca",{debug:!0,loaded:t=>{e=t.get_distinct_id()}},"hark_project"),console.log("Hark Embed JS Version 1.0.1")})()}();
